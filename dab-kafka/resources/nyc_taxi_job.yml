# The following job definition is an example of a multi-task job.
# Please update this file to define your own job.
resources:
  jobs:
    nyc_taxi_job:
      name: "nyc_taxi_job"
      tasks:
        - task_key: "bronze_task"
          spark_python_task:
            python_file: "../src/engine/main.py"
            parameters: ["--product-config-folder","${workspace.file_path}/config","--product-name", "nyc_taxi_metrics", "--step", "bronze"]
          environment_key: default
        - task_key: "silver_task"
          depends_on:
            - task_key: "bronze_task"
          spark_python_task:
            python_file: "../src/engine/main.py"
            parameters: ["--product-config-folder","${workspace.file_path}/config","--product-name", "nyc_taxi_metrics", "--step", "silver"]
          environment_key: default
        - task_key: "gold_task"
          depends_on:
            - task_key: "silver_task"
          spark_python_task:
            python_file: "../src/engine/main.py"
            parameters: ["--product-config-folder","${workspace.file_path}/config","--product-name", "nyc_taxi_metrics", "--step", "gold"]
          environment_key: default
      environments:
        - environment_key: default
          spec:
            environment_version: "4"
            dependencies :
            - "/Workspace/Users/${workspace.current_user.userName}/.bundle/dab-kafka-bundle/dev/artifacts/.internal/dab_kafka-0.1.0-py3-none-any.whl"

